<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CyberHygiene Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter&family=Roboto&family=Ubuntu&family=Orbitron&family=Courier+Prime&family=Montserrat&family=Poppins&family=Quicksand&family=Space+Mono&family=Raleway&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-light: #f0f9ff;
      --accent: #00ffc3;
      --card-light: #ffffff;
      --text: #111;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #f0f9ff;
      color: var(--text);
      min-height: 100vh;
      background-image: radial-gradient(circle, #e0f7fa 1px, transparent 1px), radial-gradient(circle, #b2ebf2 1px, transparent 1px);
      background-position: 0 0, 25px 25px;
      background-size: 50px 50px;
      animation: gridMove 40s linear infinite;
    }
    @keyframes gridMove {
      0% { background-position: 0 0, 25px 25px; }
      100% { background-position: 50px 50px, 75px 75px; }
    }
    .container {
      max-width: 700px;
      margin: auto;
      padding: 20px;
    }
    header {
      text-align: center;
    }
    h1 {
      font-size: 2em;
      color: var(--accent);
    }
    .profile-header {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin: 10px 0;
    }
    #avatarPreview {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
    }
    .settings-panel {
      display: none;
      background: var(--card-light);
      padding: 15px;
      border-radius: 12px;
      margin: 10px 0;
    }
    .settings-panel input, .settings-panel select {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
    }
    .tip-box, .checklist, .score-box {
      background: var(--card-light);
      padding: 15px;
      border-radius: 12px;
      margin-top: 20px;
    }
    .checklist ul { list-style: none; padding: 0; }
    .checklist li { margin-bottom: 10px; }
    .checklist small { color: #666; display: block; margin-left: 20px; }
    .progress-bar {
      height: 20px;
      background: #ccc;
      border-radius: 10px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      width: 0;
      background: red;
      transition: width 0.3s;
    }
    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
    }
    button {
      background: var(--accent);
      color: black;
      font-weight: bold;
      border: none;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
    }
    .celebrate {
      text-align: center;
      font-size: 1.4em;
      margin-top: 15px;
      color: green;
    }
    #countdownDisplay {
      font-weight: bold;
      text-align: center;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üõ°Ô∏è CyberHygiene Dashboard</h1>
      <div class="profile-header">
        <img id="avatarPreview" src="https://i.imgur.com/DPzUj7F.png" alt="Avatar">
        <span id="userName">User</span>
      </div>
    </header>

    <div class="buttons">
      <button onclick="toggleSettings()">‚öôÔ∏è Settings</button>
      <button onclick="refreshChecklist()">üîÑ Refresh Tasks</button>
      <button onclick="location.href='quiz.html'">üß† Take Quiz</button>
    </div>

    <div class="settings-panel" id="settingsPanel">
      <input type="text" id="newUsername" placeholder="Change Username">
      <input type="password" id="newPassword" placeholder="Change Password">
      <input type="file" id="avatarInput" accept="image/*">
      <label>Font Style:</label>
      <select id="fontStyle">
        <option value="'Inter', sans-serif">Inter</option>
        <option value="'Roboto', sans-serif">Roboto</option>
        <option value="'Ubuntu', sans-serif">Ubuntu</option>
        <option value="'Orbitron', sans-serif">Orbitron</option>
        <option value="'Courier Prime', monospace">Courier Prime</option>
        <option value="'Montserrat', sans-serif">Montserrat</option>
        <option value="'Poppins', sans-serif">Poppins</option>
        <option value="'Quicksand', sans-serif">Quicksand</option>
        <option value="'Raleway', sans-serif">Raleway</option>
        <option value="'Space Mono', monospace">Space Mono</option>
      </select>
      <label>Font Color:</label>
      <input type="color" id="fontColor" value="#111111">
      <label>Font Size:</label>
      <input type="range" id="fontSize" min="12" max="24" value="16">
      <button onclick="saveSettings()">üíæ Save Settings</button>
    </div>

    <div class="tip-box">
      <strong>üí° Tip of the Day:</strong>
      <p id="tipText">Loading...</p>
    </div>

    <div class="checklist">
      <h3>Today's Checklist</h3>
      <ul id="taskList"></ul>
      <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
      <div id="celebration" class="celebrate"></div>
      <button id="doneButton" onclick="startCountdown()">‚úÖ Done</button>
      <div id="countdownDisplay"></div>
    </div>

    <div class="score-box">
      üéØ Quiz Score: <span id="score">0</span>/5
    </div>
  </div>

  <script>
    const tips = [
      "Avoid suspicious links.", "Use strong passwords.",
      "Enable two-factor authentication.", "Update apps regularly.",
      "Back up your data!", "Check for device updates."
    ];

    const checklistDescriptions = {
      "Update antivirus": "Keep your antivirus software up to date to protect against the latest threats.",
      "Review app permissions": "Ensure apps only have access to necessary data.",
      "Secure Wi-Fi": "Use strong Wi-Fi passwords and encryption.",
      "Backup files": "Regularly back up your important data to avoid loss.",
      "Log out unused devices": "Sign out from unused or unknown devices for security.",
      "Update OS": "Install OS updates for bug fixes and security patches.",
      "Check phishing emails": "Be cautious of fake emails asking for personal info.",
      "Enable 2FA": "Use two-factor authentication to enhance account security.",
      "Clear browser cache": "Clear cache to protect your privacy and improve performance.",
      "Review privacy settings": "Check and adjust your app and account privacy settings.",
      "Avoid public Wi-Fi": "Don't use public Wi-Fi without a VPN.",
      "Change passwords": "Use strong, unique passwords regularly.",
      "Secure cloud": "Use encryption for cloud backups and review access logs.",
      "Delete spam": "Regularly clear spam to avoid malware.",
      "Run virus scan": "Scan your device regularly for threats.",
      "Check login history": "Monitor login activity for unusual access.",
      "Remove unused apps": "Uninstall apps you no longer use.",
      "Enable screen lock": "Set auto-lock and strong lockscreen passwords.",
      "Update apps": "Outdated apps can have security flaws.",
      "Read a security blog": "Stay informed about latest threats and tips.",
      "Secure social profiles": "Limit public visibility and use strong passwords.",
      "Enable biometric login": "Use fingerprint or face ID where possible.",
      "Use VPN": "Protect your connection, especially on public networks.",
      "Update password manager": "Ensure your stored credentials are secure.",
      "Check for breaches": "Use tools like HaveIBeenPwned to check your data.",
      "Review connected devices": "Check for unauthorized devices.",
      "Use incognito mode": "Browse privately without saving history.",
      "Delete old accounts": "Old accounts can be security risks.",
      "Test backup restore": "Ensure backups actually restore correctly.",
      "Log out sessions": "Log out from all active sessions periodically.",
      "Change main password": "Rotate your primary login password.",
      "Secure backup": "Store backups in encrypted, secure locations.",
      "Avoid pop-ups": "Don't click pop-ups‚Äîthey may be malicious.",
      "Check recovery email": "Ensure your recovery email is valid and protected.",
      "Clear old data": "Remove unused files and sensitive info."
    };

    const dailyTasks = {
      0: ["Update antivirus", "Review app permissions", "Secure Wi-Fi", "Backup files", "Log out unused devices"],
      1: ["Update OS", "Check phishing emails", "Enable 2FA", "Clear browser cache", "Review privacy settings"],
      2: ["Avoid public Wi-Fi", "Change passwords", "Secure cloud", "Delete spam", "Run virus scan"],
      3: ["Check login history", "Remove unused apps", "Enable screen lock", "Update apps", "Read a security blog"],
      4: ["Secure social profiles", "Enable biometric login", "Use VPN", "Update password manager", "Check for breaches"],
      5: ["Review connected devices", "Use incognito mode", "Delete old accounts", "Test backup restore", "Log out sessions"],
      6: ["Change main password", "Secure backup", "Avoid pop-ups", "Check recovery email", "Clear old data"]
    };

    function toggleSettings() {
      const panel = document.getElementById("settingsPanel");
      panel.style.display = panel.style.display === "block" ? "none" : "block";
    }

    function saveSettings() {
      const font = document.getElementById("fontStyle").value;
      const color = document.getElementById("fontColor").value;
      const size = document.getElementById("fontSize").value + "px";
      document.body.style.fontFamily = font;
      document.body.style.color = color;
      document.body.style.fontSize = size;

      const newUser = document.getElementById("newUsername").value;
      const newPass = document.getElementById("newPassword").value;

      if (newUser) {
        localStorage.setItem("user", newUser);
        document.getElementById("userName").textContent = newUser;
      }

      if (newPass) {
        localStorage.setItem("password", newPass);
        alert("Password changed. Please log in again.");
        window.location.href = "index.html";
      }
    }

    function refreshChecklist() {
      renderChecklist();
    }

    function renderChecklist() {
      const day = new Date().getDay();
      const list = dailyTasks[day];
      const taskList = document.getElementById("taskList");
      taskList.innerHTML = "";
      list.forEach(task => {
        const li = document.createElement("li");
        li.innerHTML = `<label><input type="checkbox" onchange="showExplanation(this, '${task}')"> ${task}</label><small id="${task.replace(/\s/g, '') + 'Desc'}"></small>`;
        taskList.appendChild(li);
      });
      updateProgress();
    }

    function showExplanation(checkbox, taskName) {
      const desc = document.getElementById(taskName.replace(/\s/g, '') + 'Desc');
      if (checkbox.checked) {
        desc.textContent = checklistDescriptions[taskName] || "";
      } else {
        desc.textContent = "";
      }
      updateProgress();
    }

    function updateProgress() {
      const checkboxes = document.querySelectorAll("input[type='checkbox']");
      const checked = [...checkboxes].filter(c => c.checked).length;
      const percent = (checked / checkboxes.length) * 100;
      document.getElementById("progressFill").style.width = percent + "%";
      document.getElementById("progressFill").style.background = percent < 34 ? "red" : percent < 67 ? "orange" : "limegreen";

      const allDone = percent === 100;
      document.getElementById("celebration").textContent = allDone ? "üéâ Great job! All tasks done!" : "";
    }

    function startCountdown() {
      const end = Date.now() + 86400000;
      localStorage.setItem("countdownEnd", end);
      updateCountdown();
    }

    function updateCountdown() {
      const end = localStorage.getItem("countdownEnd");
      const now = Date.now();
      const diff = end - now;
      const countdownDisplay = document.getElementById("countdownDisplay");
      if (diff <= 0) {
        countdownDisplay.textContent = "‚úÖ New checklist available!";
        localStorage.removeItem("countdownEnd");
        renderChecklist();
      } else {
        const hrs = Math.floor(diff / 3600000);
        const mins = Math.floor((diff % 3600000) / 60000);
        const secs = Math.floor((diff % 60000) / 1000);
        countdownDisplay.textContent = `‚è≥ Next checklist in ${hrs}h ${mins}m ${secs}s`;
        setTimeout(updateCountdown, 1000);
      }
    }

    function loadUser() {
      document.getElementById("userName").textContent = localStorage.getItem("user") || "User";
      document.getElementById("score").textContent = localStorage.getItem("quizScore") || 0;
      const avatar = localStorage.getItem("userAvatar");
      if (avatar) document.getElementById("avatarPreview").src = avatar;
    }

    document.getElementById("avatarInput").addEventListener("change", function (e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (e) {
        const dataURL = e.target.result;
        document.getElementById("avatarPreview").src = dataURL;
        localStorage.setItem("userAvatar", dataURL);
      };
      reader.readAsDataURL(file);
    });

    window.onload = function () {
      showTip();
      renderChecklist();
      loadUser();
      if (localStorage.getItem("countdownEnd")) {
        updateCountdown();
      }
    };

    function showTip() {
      const tip = tips[Math.floor(Math.random() * tips.length)];
      document.getElementById("tipText").textContent = tip;
    }
  </script>
</body>
</html>