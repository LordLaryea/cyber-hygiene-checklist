<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CyberHygiene Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter&family=Roboto&family=Ubuntu&family=Orbitron&family=Open+Sans&family=Poppins&family=Lato&family=Montserrat&family=Raleway&family=Merriweather&family=Playfair+Display&family=Bebas+Neue&family=Nunito&family=Quicksand&family=Work+Sans&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-light: #f4f4f4;
      --text-light: #111;
      --accent: #00ffc3;
      --card-light: #ffffff;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      font-family: 'Inter', sans-serif;
      background: var(--bg-light);
      color: var(--text-light);
    }

    .container {
      max-width: 600px;
      height: 100%;
      margin: auto;
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      overflow-y: auto;
    }

    header {
      text-align: center;
      margin-bottom: 10px;
    }

    h1 {
      font-size: 2em;
      color: var(--accent);
    }

    .profile-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    #avatarPreview {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: space-between;
      margin-top: 10px;
    }

    .settings-panel {
      display: none;
      margin-top: 10px;
      background: var(--card-light);
      border-radius: 12px;
      padding: 15px;
    }

    .settings-panel input, .settings-panel select {
      width: 100%;
      margin-bottom: 10px;
      padding: 8px;
    }

    .tip-box, .checklist, .score-box {
      background: var(--card-light);
      border-radius: 12px;
      padding: 15px;
      margin-top: 20px;
    }

    .checklist ul {
      padding-left: 0;
      list-style: none;
    }

    .progress-bar {
      background: #ccc;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 10px;
    }

    .progress-fill {
      height: 20px;
      width: 0;
      background: red;
      transition: width 0.3s;
    }

    button {
      padding: 10px;
      background: var(--accent);
      border: none;
      color: black;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
    }

    .top-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üõ°Ô∏è CyberHygiene Dashboard</h1>
      <div class="profile-header">
        <img id="avatarPreview" src="https://i.imgur.com/DPzUj7F.png" alt="Avatar">
        <span id="userName">User</span>
      </div>
    </header>

    <div class="top-controls">
      <button onclick="refreshChecklist()">üîÑ Refresh Tasks</button>
      <button onclick="toggleSettings()">‚öôÔ∏è Settings</button>
    </div>

    <div class="settings-panel" id="settingsPanel">
      <input type="text" id="newUsername" placeholder="Change Username">
      <input type="password" id="newPassword" placeholder="Change Password">
      <input type="file" id="avatarInput" accept="image/*">

      <label>Font Style:</label>
      <select id="fontStyle">
        <option value="'Inter', sans-serif">Inter</option>
        <option value="'Roboto', sans-serif">Roboto</option>
        <option value="'Ubuntu', sans-serif">Ubuntu</option>
        <option value="'Orbitron', sans-serif">Orbitron</option>
        <option value="'Open Sans', sans-serif">Open Sans</option>
        <option value="'Poppins', sans-serif">Poppins</option>
        <option value="'Lato', sans-serif">Lato</option>
        <option value="'Montserrat', sans-serif">Montserrat</option>
        <option value="'Raleway', sans-serif">Raleway</option>
        <option value="'Merriweather', serif">Merriweather</option>
        <option value="'Playfair Display', serif">Playfair Display</option>
        <option value="'Bebas Neue', cursive">Bebas Neue</option>
        <option value="'Nunito', sans-serif">Nunito</option>
        <option value="'Quicksand', sans-serif">Quicksand</option>
        <option value="'Work Sans', sans-serif">Work Sans</option>
      </select>

      <label>Font Color:</label>
      <input type="color" id="fontColor" value="#111111">

      <label>Font Size:</label>
      <input type="range" id="fontSize" min="12" max="28" value="16">

      <button onclick="saveSettings()">üíæ Save Settings</button>
    </div>

    <div class="tip-box">
      <strong>üí° Tip of the Day:</strong>
      <p id="tipText">Loading...</p>
    </div>

    <div class="checklist">
      <h3>Today's Checklist</h3>
      <ul id="taskList"></ul>
      <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    </div>

    <div class="score-box">
      üéØ Quiz Score: <span id="score">0</span>/5
    </div>

    <div class="buttons">
      <button onclick="location.href='quiz.html'">üß† Take Quiz</button>
    </div>
  </div>

  <script>
    const tips = [
      "Avoid suspicious links.",
      "Use strong passwords.",
      "Enable two-factor authentication.",
      "Update apps regularly.",
      "Back up your data!"
    ];

    const dailyTasks = {
      0: ["Update antivirus", "Review app permissions", "Secure Wi-Fi", "Backup files", "Log out unused devices"],
      1: ["Update OS", "Check phishing emails", "Enable 2FA", "Clear browser cache", "Review privacy settings"],
      2: ["Avoid public Wi-Fi", "Change passwords", "Secure cloud", "Delete spam", "Run virus scan"],
      3: ["Check login history", "Remove unused apps", "Enable screen lock", "Update apps", "Read a security blog"],
      4: ["Secure social profiles", "Enable biometric login", "Use VPN", "Update password manager", "Check for breaches"],
      5: ["Review connected devices", "Use incognito mode", "Delete old accounts", "Test backup restore", "Log out sessions"],
      6: ["Change main password", "Secure backup", "Avoid pop-ups", "Check recovery email", "Clear old data"]
    };

    function toggleSettings() {
      const panel = document.getElementById("settingsPanel");
      panel.style.display = panel.style.display === "block" ? "none" : "block";
    }

    function saveSettings() {
      const newUser = document.getElementById("newUsername").value;
      const newPass = document.getElementById("newPassword").value;
      const font = document.getElementById("fontStyle").value;
      const color = document.getElementById("fontColor").value;
      const size = document.getElementById("fontSize").value;

      if (newUser) {
        localStorage.setItem("user", newUser);
        document.getElementById("userName").textContent = newUser;
      }

      if (newPass) {
        localStorage.setItem("password", newPass);
        alert("Password changed. Please log in again.");
        window.location.href = "index.html";
      }

      document.body.style.fontFamily = font;
      document.body.style.color = color;
      document.body.style.fontSize = size + "px";

      localStorage.setItem("fontStyle", font);
      localStorage.setItem("fontColor", color);
      localStorage.setItem("fontSize", size);
    }

    function refreshChecklist() {
      renderChecklist();
    }

    function renderChecklist() {
      const day = new Date().getDay();
      const list = dailyTasks[day];
      const taskList = document.getElementById("taskList");
      taskList.innerHTML = "";
      list.forEach((task) => {
        const li = document.createElement("li");
        li.innerHTML = `<label><input type='checkbox' onchange='updateProgress()'> ${task}</label>`;
        taskList.appendChild(li);
      });
      updateProgress();
    }

    function updateProgress() {
      const checkboxes = document.querySelectorAll("input[type='checkbox']");
      const checked = [...checkboxes].filter(c => c.checked).length;
      const percent = (checked / checkboxes.length) * 100;
      const fill = document.getElementById("progressFill");
      fill.style.width = percent + "%";
      fill.style.background = percent < 34 ? "red" : percent < 67 ? "orange" : "limegreen";
    }

    function showTip() {
      const tip = tips[Math.floor(Math.random() * tips.length)];
      document.getElementById("tipText").textContent = tip;
    }

    document.getElementById("avatarInput").addEventListener("change", function (e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (e) {
        const dataURL = e.target.result;
        document.getElementById("avatarPreview").src = dataURL;
        localStorage.setItem("userAvatar", dataURL);
      };
      reader.readAsDataURL(file);
    });

    function loadUser() {
      document.getElementById("userName").textContent = localStorage.getItem("user") || "User";
      document.getElementById("score").textContent = localStorage.getItem("quizScore") || 0;
      const avatar = localStorage.getItem("userAvatar");
      if (avatar) document.getElementById("avatarPreview").src = avatar;

      const savedFont = localStorage.getItem("fontStyle");
      const savedColor = localStorage.getItem("fontColor");
      const savedSize = localStorage.getItem("fontSize");

      if (savedFont) document.body.style.fontFamily = savedFont;
      if (savedColor) document.body.style.color = savedColor;
      if (savedSize) document.body.style.fontSize = savedSize + "px";
    }

    window.onload = function () {
      showTip();
      renderChecklist();
      loadUser();
    };
  </script>
</body>
</html>